# Rune

在 Go 语言中，Rune 就是 Unicode 码点。

> 什么是 Unicode 码点？

Unicode 字符集，是基于ASCII字符集的扩展。其设计目的就是尽可能囊括世界上一切符号，
包括重音符号、变音符号、制表符和回车符等控制码等等，并为每个符号分配一个**唯一编号**，
便是 Unicode 码点。

## 重点

* 字符串是字节（bytes）的序列，而非 Rune 的序列。字符串可能包含以 UTF-8 编码的 Unicode 文本。
但由于 Go 源代码本身是以 UTF-8 编码的，因此无需对字符串进行 UTF-8 编码。

* UTF-8 编码将所有 Unicode 字符编码为 1 到 4 个字节，其中 1 个字节用于表示 ASCII 字符，
其余字节用于表示 Rune。

* ASCII 包含总共 256 个元素，其中 128 个是字符，0 到 127 被定义为码点。这里的码点指的是代表单个值的元素。

> **字符集**与**编码**傻傻分不清？

字符集和编码是计算机处理文本的两个核心概念，我们可以用「字」与「字典」的关系来类比它们。

**字符集**只定义了字符与编号的对应关系，但没有规定如何在计算机中存储这些编号。

* 它包含了所有可能被使用的「字符」（文字、符号等）
* 为每个字符分配一个唯一的「编号」（码点/Code Point）
* 例如，Unicode字符集就像一本超级大字典，收录了世界上几乎所有的文字符号
* ASCII字符集则像是一本小型字典，只收录了英文字母、数字和一些基本符号

**编码**定义了如何将字符集中的编号转换为计算机可以存储和传输的字节序列。

* 它定义了如何将字符集中的「编号」（码点）转换为计算机可以存储和传输的「字节序列」
* 不同的编码方式就像不同的检索方法（拼音检索、部首检索、四角号码等）
* 例如：
  - UTF-8 编码：一种变长编码，可以用1-4个字节表示一个Unicode字符
  - UTF-16 编码：通常用2个字节表示一个Unicode字符
  - GBK 编码：专门用于表示中文字符的编码方式


如同字典需要检索规则才能快速找到所需的字，计算机也需要编码来高效存储和传输字符。不同的编码方式有不同的特点：

* UTF-8：兼容ASCII，节省空间，是互联网上最常用的编码方式
* UTF-16：在表示某些语言时更高效
* GBK：专为中文设计，在只处理中文时可能更高效

```go
package main

import (
	"fmt"
	"unicode/utf8"
)

func main() {
	// 定义一个包含ASCII和非ASCII字符的字符串
	str := "Hello, 世界"
	
	// 字符串是字节序列
	fmt.Printf("字符串: %q\n", str)
	fmt.Printf("字节长度: %d (len函数返回字节数)\n", len(str))
	
	// 统计符文(Rune)数量
	runeCount := utf8.RuneCountInString(str)
	fmt.Printf("符文数量: %d (实际字符数)\n", runeCount)
	
	// 遍历字节
	fmt.Println("\n遍历字节:")
	for i, b := range str {
		fmt.Printf("索引 %d: 字节值 %#x (字符: %c)\n", i, b, b)
	}
	
	// 遍历符文
	fmt.Println("\n遍历符文:")
	for i, r := range str {
		fmt.Printf("索引 %d: 符文值 %#U (字符: %c)\n", i, r, r)
	}
	
	// 演示ASCII字符用1个字节表示
	asciiStr := "A"
	fmt.Printf("\nASCII字符 '%s' 的字节表示: % x (长度: %d)\n", asciiStr, asciiStr, len(asciiStr))
	
	// 演示中文字符用多个字节表示
	chineseStr := "世"
	fmt.Printf("中文字符 '%s' 的字节表示: % x (长度: %d)\n", chineseStr, chineseStr, len(chineseStr))
}
```
**输出**
```
字符串: "Hello, 世界"
字节长度: 13 (len函数返回字节数)
符文数量: 9 (实际字符数)

遍历字节:
索引 0: 字节值 0x48 (字符: H)
索引 1: 字节值 0x65 (字符: e)
索引 2: 字节值 0x6c (字符: l)
索引 3: 字节值 0x6c (字符: l)
索引 4: 字节值 0x6f (字符: o)
索引 5: 字节值 0x2c (字符: ,)
索引 6: 字节值 0x20 (字符:  )
索引 7: 字节值 0x4e16 (字符: 世)
索引 10: 字节值 0x754c (字符: 界)

遍历符文:
索引 0: 符文值 U+0048 'H' (字符: H)
索引 1: 符文值 U+0065 'e' (字符: e)
索引 2: 符文值 U+006C 'l' (字符: l)
索引 3: 符文值 U+006C 'l' (字符: l)
索引 4: 符文值 U+006F 'o' (字符: o)
索引 5: 符文值 U+002C ',' (字符: ,)
索引 6: 符文值 U+0020 ' ' (字符:  )
索引 7: 符文值 U+4E16 '世' (字符: 世)
索引 10: 符文值 U+754C '界' (字符: 界)

ASCII字符 'A' 的字节表示: 41 (长度: 1)
中文字符 '世' 的字节表示: e4 b8 96 (长度: 3)
```
